"use strict";(self["webpackChunkbutton_with_sound"]=self["webpackChunkbutton_with_sound"]||[]).push([[526],{5516:function(e,t,r){r.r(t),r.d(t,{default:function(){return U}});var o=r(3396),n=r(7139),s=r(9242);const a=e=>((0,o.dD)("data-v-7ea7efbf"),e=e(),(0,o.Cn)(),e),i={id:"mole"},c=a((()=>(0,o._)("h1",null,[(0,o.Uk)("蘑菇? 蘑菇!"),(0,o._)("br"),(0,o._)("span",{class:"score"},"0")],-1))),l={class:"d-grid gap-2 d-md-block mx-auto"},u={class:"game"},d=a((()=>(0,o._)("div",{class:"mole"},null,-1))),m=[d],h={key:0,class:"overlay"},p={class:"LeaderBoard"},k=a((()=>(0,o._)("br",null,null,-1))),f={key:0},w={key:0},b={key:1},g=a((()=>(0,o._)("div",null,"輸入名稱才可以上排行榜喔!",-1))),_={class:"form-group"};function S(e,t,r,a,d,S){const v=(0,o.up)("BackToQuiz"),y=(0,o.up)("dif");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(v,{nickname:this.nickname},null,8,["nickname"]),(0,o._)("div",i,[(0,o._)("div",null,[c,(0,o._)("div",l,[(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>S.startGame&&S.startGame(...e)),class:"btn btn-primary mt-3 mx-2"},"開始蘑菇"),(0,o._)("button",{onClick:t[1]||(t[1]=(...e)=>S.getLeaderBoard&&S.getLeaderBoard(...e)),class:"btn btn-primary mt-3"},"排行榜")])]),(0,o.wy)((0,o._)("div",u,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.holeCount,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:(0,n.C_)("hole hole"+e)},m,2)))),128))],512),[[s.F8,!d.turnOff]])]),d.leaderBoard.length>0?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",p,[(0,o._)("button",{onClick:t[2]||(t[2]=(...e)=>S.closeLeaderBoard&&S.closeLeaderBoard(...e)),class:"btn btn-danger close-btn"},"×"),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.leaderBoard,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"player-score"},[(0,o._)("h3",null,"第"+(0,n.zw)(t+1)+"名: "+(0,n.zw)(e.username)+": "+(0,n.zw)(e.score)+"分",1)])))),128)),(0,o.Uk)(" ...... "),k,d.currentScore>0?((0,o.wg)(),(0,o.iD)("div",f,[d.currentRank>0?((0,o.wg)(),(0,o.iD)("h3",w,"你是 第"+(0,n.zw)(d.currentRank)+"名: "+(0,n.zw)(d.nickname)+": "+(0,n.zw)(d.currentScore)+"分",1)):((0,o.wg)(),(0,o.iD)("div",b,[g,(0,o._)("div",_,[(0,o.wy)((0,o._)("input",{type:"text",class:"col-4 mx-auto form-control","onUpdate:modelValue":t[3]||(t[3]=t=>e.nicknameInput=t),placeholder:"輸入名稱"},null,512),[[s.nr,e.nicknameInput]])]),(0,o._)("button",{class:"btn btn-primary mt-2",onClick:t[4]||(t[4]=(...e)=>S.setNicknameAndUploadScore&&S.setNicknameAndUploadScore(...e))},"確定名稱")]))])):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),(0,o.Wm)(y,{class:"credit"},{default:(0,o.w5)((()=>[(0,o.Uk)("credit: 一尾懶鯉魚")])),_:1})],64)}var v=r.p+"media/mushroom.83898fd7.mp3",y=r.p+"media/nope.eedfcb0b.mp3",B=r(9587),L={el:"#mole",components:{BackToQuiz:B.Z},data(){return{nickname:"",holeCount:9,currentScore:0,currentRank:0,isStart:!1,turnOff:!1,lastHole:null,moles:[],bgmAudio:new Audio(v),leaderBoard:{},staticLeaderBoard:{leader_board:[{username:"波普貓",score:57},{username:"維尼",score:52},{username:"管理員伯伯",score:52},{username:"魚",score:51},{username:"波堡",score:51},{username:"白澤",score:50},{username:"洋蔥",score:50},{username:"卡門",score:50},{username:"冰",score:50},{username:"airmark",score:48},{username:"紅鯉魚",score:47},{username:"Isola",score:47},{username:"六分鐘ㄉ惡夢",score:46},{username:"漂浮黑喵",score:37}]}}},mounted(){const e=(e,t)=>{t||(t=window.location.href),e=e.replace(/[[\]]/g,"\\$&");const r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=r.exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null};if(e("username")&&(this.nickname=e("username")),window.innerWidth<=768){const e=document.querySelector(".game");e.style="width: "+window.outerWidth+"px; height: "+window.outerHeightHeight+"px;"}this.moles=document.querySelectorAll(".mole"),this.moles.forEach((e=>{e.addEventListener("click",this.score)}))},beforeRouteLeave(e,t,r){this.bgmAudio.pause(),r()},methods:{startGame(){this.isStart||(this.isStart=!0,this.currentScore=0,this.currentRank=0,this.closeLeaderBoard(),document.querySelector(".score").textContent=this.currentScore,this.popUp(),this.bgmAudio.play(),setTimeout((()=>{this.turnOff=!0,this.isStart=!1,this.uploadScore()}),37e3))},popUp(){const e=this.randomTime(500,900),t=this.randomHoles();t&&(t.classList.add("up"),setTimeout((()=>{t.classList.remove("up"),!1===this.turnOff?this.popUp():this.turnOff=!1}),e))},randomTime(e,t){return Math.floor(Math.random()*(t-e)+e)},randomHoles(){const e=document.querySelectorAll(".hole"),t=Math.floor(Math.random()*this.holeCount),r=e[t];return r===this.lastHole?this.randomHoles():(this.lastHole=r,r)},score(e){e.isTrusted&&(this.playSoundEffect(),this.currentScore++,document.querySelector(".score").textContent=this.currentScore,e.target.parentNode.classList.remove("up"))},playSoundEffect(){const e=new Audio(y);let t=!1,r=!1;r&&(e.pause(),e.currentTime=0),t&&(t=!1,r=!1,e.onerror=function(){t=!0});const o=e.play();void 0!==o&&o.then((e=>{r=!0})).catch((e=>{t=!0}))},uploadScore(){this.currentRank=514,setTimeout((()=>{this.getLeaderBoard()}),1e3)},getLeaderBoard(){this.isStart||(this.turnOff=!0,this.leaderBoard=this.staticLeaderBoard.leader_board)},closeLeaderBoard(){this.turnOff=!1,this.leaderBoard={}},setNicknameAndUploadScore(){this.nickname=this.nicknameInput.trim(),""!==this.nickname&&this.uploadScore()}}},C=r(89);const H=(0,C.Z)(L,[["render",S],["__scopeId","data-v-7ea7efbf"]]);var U=H}}]);
//# sourceMappingURL=526.55d39cae.js.map