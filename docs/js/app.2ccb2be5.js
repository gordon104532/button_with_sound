(function(){"use strict";var e={91:function(e,t,n){var i=n(9242),o=n(3396);const s=(0,o._)("nav",null,null,-1);function r(e,t){const n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[s,(0,o.Wm)(n)],64)}var a=n(89);const c={},u=(0,a.Z)(c,[["render",r]]);var l=u,h=n(2483),d=n(3741);const m=[{path:"/",name:"quiz",component:d["default"]},{path:"/quiz",name:"quiz",component:()=>n.e(557).then(n.bind(n,3741))},{path:"/share",name:"share",component:()=>n.e(557).then(n.bind(n,6293))},{path:"/sound_pad",name:"soundPad",component:()=>n.e(88).then(n.bind(n,9088))},{path:"/snow",name:"snow",component:()=>n.e(620).then(n.bind(n,7620))},{path:"/mole",name:"mole",component:()=>n.e(84).then(n.bind(n,3964))},{path:"/easter_egg",name:"easter_egg",component:()=>n.e(253).then(n.bind(n,5501))},{path:"/pope_hbd_2023",component:()=>n.e(958).then(n.bind(n,1958))}],f=(0,h.p7)({history:(0,h.r5)(),routes:m});var p=f;(0,i.ri)(l).use(p).mount("#app")},3741:function(e,t,n){n.r(t),n.d(t,{default:function(){return qe}});var i=n(3396),o=n(7139),s=n(9242),r=n.p+"img/logo.d792df5d.png";const a=e=>((0,i.dD)("data-v-31f43950"),e=e(),(0,i.Cn)(),e),c=a((()=>(0,i._)("br",null,null,-1))),u={class:"quiz"},l=a((()=>(0,i._)("div",{class:"sound-cloud-player"},[(0,i._)("iframe",{width:"100%",height:"100px",scrolling:"no",frameborder:"no",allow:"autoplay",src:"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/228593349&color=%23745c6c&auto_play=true&hide_related=false&show_comments=false&show_user=true&show_reposts=false&show_teaser=true"})],-1)));function h(e,t,n,a,h,d){const m=(0,i.up)("QuizPage");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("img",{style:{padding:"5px"},width:"15%",height:"15%",alt:"logo",src:r,onClick:t[0]||(t[0]=(...e)=>d.clickIcon&&d.clickIcon(...e))}),(0,i.wy)((0,i._)("h2",null,[(0,i.Uk)((0,o.zw)(h.showMsg)+" ",1),c,(0,i.Uk)(" "+(0,o.zw)(h.countDownMsg),1)],512),[[s.F8,h.showMsg.length>0]]),(0,i._)("div",u,[(0,i.Wm)(m)]),l],64)}n(560);var d=n.p+"img/mushroom.fdb0a1c8.gif";const m=e=>((0,i.dD)("data-v-3e52fe6a"),e=e(),(0,i.Cn)(),e),f={id:"quiz",class:"container mt-3"},p=m((()=>(0,i._)("h1",null,"大家認識的波普貓",-1))),g={key:0},w=m((()=>(0,i._)("br",null,null,-1))),b={class:"form-group"},y={key:1},v={key:0},_=m((()=>(0,i._)("h6",{style:{"font-size":"medium"}},"(建議先選擇答題再出題)",-1))),k={key:1,class:"d-grid gap-2 d-md-block mx-auto"},z={class:"mb-3"},q=m((()=>(0,i._)("br",null,null,-1))),x={key:0,class:"alert alert-success d-flex align-items-center",role:"alert"},A=m((()=>(0,i._)("svg",{class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Success:"},[(0,i._)("use",{"xlink:href":"#check-circle-fill"})],-1))),Q=m((()=>(0,i._)("div",null," 題目建立成功！ ",-1))),B=[A,Q],D=m((()=>(0,i._)("h2",null,"新增問題",-1))),C={class:"mb-3"},S=m((()=>(0,i._)("label",{for:"setQuestion",class:"form-label"},"題目：",-1))),E={class:"row"},I={class:"mb-3"},j=m((()=>(0,i._)("label",{for:"choiceA",class:"form-label"},"選項 A：",-1))),T={class:"mb-3"},N=m((()=>(0,i._)("label",{for:"choiceB",class:"form-label"},"選項 B：",-1))),M=m((()=>(0,i._)("button",{type:"submit",class:"btn btn-primary"},"送出",-1))),O={key:2},G={key:0},P={class:"mx-auto"},F={class:"mt-4",style:{"font-size":"large"}},L={class:"mt"},U={key:0,class:"d-grid gap-2 col-6 mx-auto"},$={key:1,class:"d-grid gap-2 mx-auto"},H={class:"row"},V={class:"col-6"},Y={class:"mt-4"},K={class:"mt-2",style:{"font-size":"large"}},W={class:"user-names"},Z={class:"col-6"},J={class:"mt-4"},R={class:"mt-2",style:{"font-size":"large"}},X={class:"user-names"},ee={key:1},te=m((()=>(0,i._)("h3",null,"No more questions!",-1))),ne={class:"d-grid gap-2 d-md-block mx-auto"},ie={class:"mx-auto"},oe={class:"mt"},se={class:"d-flex justify-content-center mr-2"},re={class:"btn btn-outline-primary btn-lg mr-2"},ae={class:"btn btn-outline-primary btn-lg"},ce={key:0},ue=m((()=>(0,i._)("h4",null,"已舉報成功",-1))),le=[ue],he={key:1},de=["onClick"],me=m((()=>(0,i._)("h3",null," ~~~~~~~~~~~~~~~~~~~~ ",-1))),fe=m((()=>(0,i._)("br",null,null,-1))),pe=m((()=>(0,i._)("img",{id:"cuteGif",src:d,alt:"Mushroom GIF",style:{width:"200px",height:"200px"}},null,-1))),ge=[pe];function we(e,t,n,r,a,c){return(0,i.wg)(),(0,i.iD)("div",f,[p,a.nickname?((0,i.wg)(),(0,i.iD)("div",y,[a.quizStarted?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",v,[(0,i._)("h3",null,"Hi "+(0,o.zw)(a.nickname)+" ᓚᘏᗢ",1),_])),a.quizStarted?((0,i.wg)(),(0,i.iD)("div",O,[a.question?((0,i.wg)(),(0,i.iD)("div",G,[(0,i._)("div",P,[(0,i._)("h2",F,"出題者: "+(0,o.zw)(a.author),1),(0,i._)("h2",L,"Q: "+(0,o.zw)(a.question),1)]),a.isAnswered?((0,i.wg)(),(0,i.iD)("div",$,[(0,i._)("div",H,[(0,i._)("div",V,[(0,i._)("h2",Y,(0,o.zw)(a.choiceA),1),(0,i._)("h2",K,"共 "+(0,o.zw)(a.answeredBy.A.length)+" 人",1),(0,i._)("div",W,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.answeredBy.A,((e,t)=>((0,i.wg)(),(0,i.iD)("span",{key:t,class:"user-name"},(0,o.zw)(e),1)))),128))])]),(0,i._)("div",Z,[(0,i._)("h2",J,(0,o.zw)(a.choiceB),1),(0,i._)("h2",R,"共 "+(0,o.zw)(a.answeredBy.B.length)+" 人",1),(0,i._)("div",X,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.answeredBy.B,((e,t)=>((0,i.wg)(),(0,i.iD)("span",{key:t,class:"user-name"},(0,o.zw)(e),1)))),128))])])]),(0,i._)("button",{class:"btn btn-outline-primary btn-lg",onClick:t[10]||(t[10]=(...e)=>c.getNextQuestion&&c.getNextQuestion(...e))},"下一題")])):((0,i.wg)(),(0,i.iD)("div",U,[(0,i._)("button",{class:"btn btn-outline-primary btn-lg mr-2",onClick:t[8]||(t[8]=e=>c.submitAnswer("A"))},(0,o.zw)(a.choiceA),1),(0,i._)("button",{class:"btn btn-outline-primary btn-lg",onClick:t[9]||(t[9]=e=>c.submitAnswer("B"))},(0,o.zw)(a.choiceB),1)]))])):((0,i.wg)(),(0,i.iD)("div",ee,[te,(0,i._)("button",{class:"btn btn-primary mx-2",onClick:t[11]||(t[11]=(...e)=>c.getQuestionList&&c.getQuestionList(...e))},"列出所有題目"),(0,i._)("div",ne,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.quizzes,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i._)("div",ie,[(0,i._)("h2",oe,"Q: "+(0,o.zw)(e.question),1)]),(0,i._)("div",se,[(0,i._)("button",re,(0,o.zw)(e.choices[0]),1),(0,i._)("button",ae,(0,o.zw)(e.choices[1]),1)]),e.reported?((0,i.wg)(),(0,i.iD)("div",ce,le)):((0,i.wg)(),(0,i.iD)("div",he,[(0,i._)("button",{class:"btn btn-warning btn-sm",onClick:e=>c.reportQuestion(t)},"舉報",8,de)])),me,fe])))),128))])]))])):((0,i.wg)(),(0,i.iD)("div",k,[(0,i._)("button",{class:"btn btn-primary mx-2",onClick:t[2]||(t[2]=(...e)=>c.startQuiz&&c.startQuiz(...e))},"答題"),(0,i._)("button",{class:"btn btn-primary mx-2",onClick:t[3]||(t[3]=e=>a.isSetQuestion=!a.isSetQuestion)},"出題"),(0,i.wy)((0,i._)("div",z,[q,a.isSubmitSuccess?((0,i.wg)(),(0,i.iD)("div",x,B)):(0,i.kq)("",!0),D,(0,i._)("form",{onSubmit:t[7]||(t[7]=(0,s.iM)(((...e)=>c.submitQuiz&&c.submitQuiz(...e)),["prevent"]))},[(0,i._)("div",C,[S,(0,i.wy)((0,i._)("textarea",{class:"form-control",id:"setQuestion","onUpdate:modelValue":t[4]||(t[4]=e=>a.setQuestion=e),placeholder:"題目",required:""},null,512),[[s.nr,a.setQuestion]])]),(0,i._)("div",E,[(0,i._)("div",I,[j,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"choiceA","onUpdate:modelValue":t[5]||(t[5]=e=>a.choiceA=e),placeholder:"選項A",required:""},null,512),[[s.nr,a.choiceA]])]),(0,i._)("div",T,[N,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"choiceB","onUpdate:modelValue":t[6]||(t[6]=e=>a.choiceB=e),placeholder:"選項B",required:""},null,512),[[s.nr,a.choiceB]])])]),M],32)],512),[[s.F8,a.isSetQuestion]])]))])):((0,i.wg)(),(0,i.iD)("div",g,[w,(0,i.Uk)(" 這裡輸入你的名字，不是輸入你認識的波普貓(這個等會兒): "),(0,i._)("div",b,[(0,i.wy)((0,i._)("input",{type:"text",class:"col-4 mx-auto form-control","onUpdate:modelValue":t[0]||(t[0]=e=>a.nicknameInput=e),placeholder:"輸入名稱"},null,512),[[s.nr,a.nicknameInput]])]),(0,i._)("button",{class:"btn btn-primary mt-2",onClick:t[1]||(t[1]=(...e)=>c.setNickname&&c.setNickname(...e))},"確定名稱")])),(0,i._)("div",{onClick:t[12]||(t[12]=(...e)=>c.clickMushroom&&c.clickMushroom(...e))},ge)])}var be={name:"QuizPage",props:{msg:String},el:"#quiz",data(){return{cuteGif:null,nicknameInput:"",nickname:"",quizStarted:!1,author:"",questionId:"",question:"",choiceA:"",choiceB:"",isAnswered:!1,answeredBy:[[]],isSetQuestion:!1,isSubmitSuccess:!1,setQuestion:"",quizzes:{}}},mounted(){const e=(e,t)=>{t||(t=window.location.href),e=e.replace(/[[\]]/g,"\\$&");const n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null};e("username")&&(this.nickname=e("username")),this.cuteGif=document.getElementById("cuteGif"),setTimeout((()=>{this.animate()}),3e4)},methods:{setNickname(){this.nickname=this.nicknameInput.trim()},startQuiz(){this.quizStarted=!0,this.getNextQuestion()},getNextQuestion(){this.isAnswered=!1,fetch(`https://gordon-the-owl.tw/api/quiz?username=${this.nickname}`,{method:"GET"}).then((e=>e.json())).then((e=>{this.author=e.author,this.questionId=e.id,this.question=e.question,0!==this.question.length&&(this.choiceA=e.choices[0],this.choiceB=e.choices[1],this.answeredBy.A=e.answered_by[0]?e.answered_by[0]:"",this.answeredBy.B=e.answered_by[1]?e.answered_by[1]:"")})).catch((e=>{console.error("getNextQuestion Error:",e)}))},submitAnswer(e){fetch("https://gordon-the-owl.tw/api/quiz",{method:"POST",body:JSON.stringify({quiz_id:this.questionId,answer:e,username:this.nickname}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{"answerQuiz success"===t.message&&(this.isAnswered=!0,"A"===e?0===this.answeredBy.A.length?this.answeredBy.A=[this.nickname]:this.answeredBy.A.push(this.nickname):0===this.answeredBy.B.length?this.answeredBy.B=[this.nickname]:this.answeredBy.B.push(this.nickname))})).catch((e=>{console.error("submitAnswer Error:",e)}))},submitQuiz(){const e={question:this.setQuestion,choices:[this.choiceA,this.choiceB],author:this.nickname};fetch("https://gordon-the-owl.tw/api/quiz",{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{e.ok?(this.setQuestion="",this.choiceA="",this.choiceB="",this.isSubmitSuccess=!0,setTimeout((()=>{this.isSubmitSuccess=!1,this.isSetQuestion=!1}),2e3)):console.error("Failed to submit quiz.")})).catch((e=>{console.error("getNextQuestion Error:",e)}))},getQuestionList(){fetch("https://gordon-the-owl.tw/api/quiz/list",{method:"GET"}).then((e=>e.json())).then((e=>{this.quizzes=e})).catch((e=>{console.error("getQuestionList Error:",e)}))},reportQuestion(e){fetch(`https://gordon-the-owl.tw/api/quiz?qid=${e}&username=${this.nickname}`,{method:"DELETE"}).then((t=>{t.ok&&console.log("reportQuestion success key: ",e)})).catch((t=>{console.error("reportQuestion err:",t,", key: ",e)})),this.quizzes[e].reported=!0},clickMushroom(){this.$router.push("/mole?username="+this.nickname)},animate(){let e=-200;const t=3;this.cuteGif.style.display="block",this.cuteGif.style.left="-200px",this.cuteGif.style.bottom="0";const n=setInterval((()=>{e+=t,this.cuteGif.style.left=e+"px",e>=window.innerWidth&&(clearInterval(n),this.cuteGif.style.display="none",setTimeout((()=>{this.animate()}),3e4))}),10)}}},ye=n(89);const ve=(0,ye.Z)(be,[["render",we],["__scopeId","data-v-3e52fe6a"]]);var _e=ve,ke={name:"QuizView",data(){return{showMsg:"",countDownMsg:"",countDownInterval:null,esterEggCount:0}},components:{QuizPage:_e},methods:{clickIcon(){this.esterEggCount+=1,5===this.esterEggCount&&fetch("https://gordon-the-owl.tw/api/easter_egg",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{e.ok?this.$router.push("/easter_egg"):(this.showMsg="\\我知道你很急，但你先別急/\n",e.start_at>0&&(this.countDown(e.start_at),this.countDownInterval=setInterval((()=>{this.countDown(e.start_at)}),1e3)),this.esterEggCount=0,setTimeout((()=>{clearInterval(this.countDownInterval),this.showMsg="",this.countDownMsg=""}),1e4))})).catch((e=>{console.error("fetch /api/easter_egg Error:",e)}))},countDown(e){const t=e,n=Math.floor(Date.now()/1e3),i=t-n,o=Math.floor(i/3600),s=Math.floor(i%3600/60),r=i%60;this.countDownMsg=`倒數: ${o} 小時 ${s} 分鐘 ${r} 秒\n`}}};const ze=(0,ye.Z)(ke,[["render",h],["__scopeId","data-v-31f43950"]]);var qe=ze}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,s){if(!i){var r=1/0;for(l=0;l<e.length;l++){i=e[l][0],o=e[l][1],s=e[l][2];for(var a=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(a=!1,s<r&&(r=s));if(a){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[i,o,s]}}(),function(){n.F={},n.E=function(e){Object.keys(n.F).map((function(t){n.F[t](e)}))}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+(557===e?"share":e)+"."+{84:"55ab1b97",88:"2e60c18e",253:"6782c1ee",557:"a4d8a46e",620:"f129ceba",958:"34d1586e"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{84:"f86a3581",620:"e4e594f0",958:"4f753d32"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="button_with_sound:";n.l=function(i,o,s,r){if(e[i])e[i].push(o);else{var a,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(c=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[o];var d=function(t,n){a.onerror=a.onload=null,clearTimeout(m);var o=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/button_with_sound/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,i,o){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var r=function(n){if(s.onerror=s.onload=null,"load"===n.type)i();else{var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=r,c.request=a,s.parentNode&&s.parentNode.removeChild(s),o(c)}};return s.onerror=s.onload=r,s.href=t,n?n.parentNode.insertBefore(s,n.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var o=n[i],s=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===e||s===t))return o}var r=document.getElementsByTagName("style");for(i=0;i<r.length;i++){o=r[i],s=o.getAttribute("data-href");if(s===e||s===t)return o}},i=function(i){return new Promise((function(o,s){var r=n.miniCssF(i),a=n.p+r;if(t(r,a))return o();e(i,a,null,o,s)}))},o={143:0};n.f.miniCss=function(e,t){var n={84:1,620:1,958:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=i(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,i){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var s=new Promise((function(n,i){o=e[t]=[n,i]}));i.push(o[2]=s);var r=n.p+n.u(t),a=new Error,c=function(i){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,o[1](a)}};n.l(r,c,"chunk-"+t,t)}},n.F.j=function(t){if(!n.o(e,t)||void 0===e[t]){e[t]=null;var i=document.createElement("link");n.nc&&i.setAttribute("nonce",n.nc),i.rel="prefetch",i.as="script",i.href=n.p+n.u(t),document.head.appendChild(i)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,s,r=i[0],a=i[1],c=i[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(c)var l=c(n)}for(t&&t(i);u<r.length;u++)s=r[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},i=self["webpackChunkbutton_with_sound"]=self["webpackChunkbutton_with_sound"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){n.O(0,[143],(function(){[88,620,84,253,958].map(n.E)}),5)}();var i=n.O(void 0,[998],(function(){return n(91)}));i=n.O(i)})();
//# sourceMappingURL=app.2ccb2be5.js.map