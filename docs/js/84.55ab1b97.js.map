{"version":3,"file":"js/84.55ab1b97.js","mappings":"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","sources":["webpack://button_with_sound/./src/views/WackMoleView.vue","webpack://button_with_sound/./src/views/WackMoleView.vue?432a"],"sourcesContent":["<template>\r\n<a class=\"btn btn-primary home\" :href=\"'/#/quiz?username=' + this.nickname\" role=\"button\">⬅回問答</a>\r\n<div id=\"mole\">\r\n  <div>\r\n    <h1>蘑菇? 蘑菇!<br>\r\n      <span class=\"score\">0</span>\r\n      </h1>\r\n      <div class=\"d-grid gap-2 d-md-block mx-auto\">\r\n        <button @click=\"startGame\" class=\"btn btn-primary mt-3 mx-2\">開始蘑菇</button>\r\n        <button @click=\"getLeaderBoard\" class=\"btn btn-primary mt-3\">排行榜</button>\r\n        </div>\r\n    </div>\r\n\r\n  <div class=\"game\" v-show=\"!turnOff\">\r\n    <div v-for=\"index in this.holeCount\" :key=\"index\" :class=\"'hole hole' + index\">\r\n      <div class=\"mole\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- 遮罩層 -->\r\n  <div class=\"overlay\" v-if=\"leaderBoard.length > 0\">\r\n    <!-- 排行榜容器 -->\r\n    <div class=\"LeaderBoard\">\r\n      <!-- 關閉按鈕 -->\r\n      <button @click=\"closeLeaderBoard\" class=\"btn btn-danger close-btn\">×</button>\r\n      <!-- 排行榜 -->\r\n      <div v-for=\"(player, index) in leaderBoard\" :key=\"index\" class=\"player-score\">\r\n        <h3>第{{ index + 1 }}名: {{ player.username }}: {{ player.score }}分</h3>\r\n      </div>\r\n      ......\r\n      <br>\r\n      <h3 v-if=\"currentScore > 0\">你是 第{{ currentRank }}名: {{ nickname }}: {{ currentScore }}分</h3>\r\n    </div>\r\n  </div>\r\n\r\n  <dif class=\"credit\">credit: 一尾懶鯉魚</dif>\r\n  </template>\r\n\r\n<script>\r\nimport bgm from '../assets/audio/mushroom.mp3'\r\n\r\nimport soundEffect from '../assets/audio/nope.mp3'\r\nexport default {\r\n  el: '#mole',\r\n  data () {\r\n    return {\r\n      nickname: '',\r\n      holeCount: 9,\r\n      currentScore: 0,\r\n      currentRank: 0,\r\n      isStart: false,\r\n      turnOff: false,\r\n      lastHole: null,\r\n      moles: [],\r\n      bgmAudio: new Audio(bgm),\r\n      leaderBoard: {}\r\n    }\r\n  },\r\n  mounted () {\r\n    // 從 URL 查詢字串中擷取參數的函式\r\n    const getParameterByName = (name, url) => {\r\n      if (!url) url = window.location.href\r\n      name = name.replace(/[[\\]]/g, '\\\\$&')\r\n      const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)')\r\n      const results = regex.exec(url)\r\n      if (!results) return null\r\n      if (!results[2]) return ''\r\n      return decodeURIComponent(results[2].replace(/\\+/g, ' '))\r\n    }\r\n\r\n    // 從網址參數中獲取所需的值\r\n    if (getParameterByName('username')) {\r\n      this.nickname = getParameterByName('username')\r\n    }\r\n\r\n    if (window.innerWidth <= 768) { // For mobile\r\n      const game = document.querySelector('.game')\r\n      game.style = 'width: ' + window.outerWidth + 'px; height: ' + window.outerHeightHeight + 'px;'\r\n    }\r\n\r\n    this.moles = document.querySelectorAll('.mole')\r\n    this.moles.forEach(mole => {\r\n      mole.addEventListener('click', this.score)\r\n    })\r\n  },\r\n  beforeRouteLeave (to, from, next) {\r\n    // Stop playing the background music\r\n    this.bgmAudio.pause()\r\n    next()\r\n  },\r\n  methods: {\r\n    startGame () {\r\n      // lock\r\n      if (this.isStart) return\r\n\r\n      this.isStart = true\r\n      this.currentScore = 0\r\n      this.currentRank = 0\r\n      this.closeLeaderBoard()\r\n      document.querySelector('.score').textContent = this.currentScore\r\n      this.popUp()\r\n      this.bgmAudio.play()\r\n      setTimeout(() => {\r\n        this.turnOff = true\r\n        this.isStart = false\r\n\r\n        this.uploadScore()\r\n      }, 37000)\r\n    },\r\n    popUp () {\r\n      const time = this.randomTime(500, 900)\r\n      const hole = this.randomHoles()\r\n      if (!hole) {\r\n        return // 如果 hole 為 undefined，不執行任何操作\r\n      }\r\n\r\n      hole.classList.add('up')\r\n      setTimeout(() => {\r\n        hole.classList.remove('up')\r\n        if (this.turnOff === false) {\r\n          this.popUp()\r\n        } else {\r\n          this.turnOff = false\r\n        }\r\n      }, time)\r\n    },\r\n    randomTime (min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min)\r\n    },\r\n    randomHoles () {\r\n      const holes = document.querySelectorAll('.hole')\r\n      const index = Math.floor(Math.random() * this.holeCount)\r\n      const currentHole = holes[index]\r\n      if (currentHole === this.lastHole) {\r\n        return this.randomHoles()\r\n      } else {\r\n        this.lastHole = currentHole\r\n        return currentHole\r\n      }\r\n    },\r\n    score (event) {\r\n      if (!event.isTrusted) return\r\n      this.playSoundEffect()\r\n      this.currentScore++\r\n      document.querySelector('.score').textContent = this.currentScore\r\n      event.target.parentNode.classList.remove('up')\r\n    },\r\n    playSoundEffect () {\r\n      const soundEffectAudio = new Audio(soundEffect)\r\n      let hasErrors = false\r\n      let canPause = false\r\n      if (canPause) {\r\n        soundEffectAudio.pause()\r\n        soundEffectAudio.currentTime = 0\r\n      }\r\n\r\n      if (hasErrors) {\r\n        hasErrors = false\r\n        canPause = false\r\n        soundEffectAudio.onerror = function () {\r\n          hasErrors = true\r\n        }\r\n      }\r\n\r\n      const playPromise = soundEffectAudio.play()\r\n      if (playPromise !== undefined) {\r\n        playPromise.then(_ => {\r\n          canPause = true\r\n        }\r\n        ).catch(_ => {\r\n          hasErrors = true\r\n        }\r\n        )\r\n      }\r\n    },\r\n    uploadScore () {\r\n      if (this.currentScore === 0) return\r\n      if (this.nickname === '') return\r\n\r\n      fetch(`${process.env.VUE_APP_BACKEND_URL}/api/mole?score=${this.currentScore}&username=${this.nickname}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          this.currentRank = data.rank\r\n          console.log('this.currentRank ' + this.currentRank)\r\n        })\r\n        .catch(error => {\r\n          console.error('uploadScore Error:', error)\r\n        })\r\n\r\n      setTimeout(() => {\r\n        this.getLeaderBoard()\r\n      }, 1000)\r\n    },\r\n    getLeaderBoard () {\r\n      if (this.isStart) return\r\n\r\n      this.turnOff = true\r\n      fetch(`${process.env.VUE_APP_BACKEND_URL}/api/mole`, {\r\n        method: 'GET'\r\n      })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          console.log(data)\r\n          if (data.leader_board.length === 0) {\r\n            this.leaderBoard = [{\r\n              username: '還沒有玩家',\r\n              score: 0\r\n            }]\r\n            return\r\n          }\r\n          this.leaderBoard = data.leader_board\r\n        })\r\n        .catch(error => {\r\n          this.turnOff = false\r\n          console.error('getLeaderBoard Error:', error)\r\n        })\r\n    },\r\n    closeLeaderBoard () {\r\n      this.turnOff = false\r\n      this.leaderBoard = {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  *, *:before, *:after {\r\n    box-sizing: inherit;\r\n  }\r\n\r\nbody {\r\n  padding: 0;\r\n  margin: 0;\r\n  font-family: 'Amatic SC', cursive;\r\n}\r\n\r\nh1 {\r\n  text-align: center;\r\n  font-size: 3rem;\r\n  line-height: 1;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.score {\r\n  background: rgba(255,255,255,0.2);\r\n  padding: 0 3rem;\r\n  line-height: 1;\r\n  border-radius: 1rem;\r\n}\r\n\r\n.game {\r\n  width: 600px;\r\n  height: 600px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin: 0 auto;\r\n}\r\n\r\n.hole {\r\n  flex: 1 0 33.33%;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.hole:after {\r\n  display: block;\r\n  background: url('../assets/img/dirt.svg') bottom center no-repeat;\r\n  background-size: contain;\r\n  content: '';\r\n  width: 100%;\r\n  height: 70px;\r\n  position: absolute;\r\n  z-index: 2;\r\n  bottom: -25px;\r\n}\r\n\r\n.mole {\r\n  background:url('../assets/img/mushroom.gif') bottom center no-repeat;\r\n  background-size: 90%;\r\n  position: absolute;\r\n  top: 100%;\r\n  width: 100%;\r\n  height: 100%;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.hole.up .mole {\r\n  top: 0;\r\n}\r\n\r\n.credit {\r\n  position: fixed;\r\n  right: 20px;\r\n  bottom: 10px;\r\n}\r\n\r\n.home {\r\n  position: fixed;\r\n  left: 20px;\r\n  top: 10px;\r\n}\r\n\r\n.overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5); /* 半透明黑色背景 */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.LeaderBoard {\r\n  background-color: #4e4e4e;\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\r\n  position: relative;\r\n  z-index: 5;\r\n}\r\n\r\n.close-btn {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n}\r\n\r\n.player-score {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./WackMoleView.vue?vue&type=template&id=9c2b4a08&scoped=true\"\nimport script from \"./WackMoleView.vue?vue&type=script&lang=js\"\nexport * from \"./WackMoleView.vue?vue&type=script&lang=js\"\n\nimport \"./WackMoleView.vue?vue&type=style&index=0&id=9c2b4a08&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9c2b4a08\"]])\n\nexport default __exports__"],"names":["id","_createElementVNode","class","_hoisted_6","href","nickname","role","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","args","$options","startGame","getLeaderBoard","_hoisted_5","_createElementBlock","_Fragment","_renderList","holeCount","index","key","_normalizeClass","$data","turnOff","leaderBoard","length","_hoisted_8","_hoisted_9","closeLeaderBoard","player","_toDisplayString","username","score","_hoisted_10","currentScore","_hoisted_11","currentRank","_createVNode","_component_dif","el","data","isStart","lastHole","moles","bgmAudio","Audio","bgm","mounted","getParameterByName","name","url","window","location","replace","regex","RegExp","results","exec","decodeURIComponent","this","innerWidth","game","document","querySelector","style","outerWidth","outerHeightHeight","querySelectorAll","forEach","mole","addEventListener","beforeRouteLeave","to","from","next","pause","methods","textContent","popUp","play","setTimeout","uploadScore","time","randomTime","hole","randomHoles","classList","add","remove","min","max","Math","floor","random","holes","currentHole","event","isTrusted","playSoundEffect","target","parentNode","soundEffectAudio","soundEffect","hasErrors","canPause","currentTime","onerror","playPromise","undefined","then","_","catch","fetch","method","headers","response","json","rank","console","log","error","leader_board","__exports__","render"],"sourceRoot":""}