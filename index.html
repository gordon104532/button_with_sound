<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preconnect" href="https://cdn4.buysellads.net" crossorigin>
<link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous" as="script">
<title>
  
  ㄅㄅㄅ
  
</title>
<meta name="description" content="可愛吧" />
<meta property="og:title" content="ㄅ主播" />
<meta property="og:description" content="ㄅ主播ㄉ按鈕" />
<meta name="color-scheme" content="light dark">
<meta name="theme-color" content="#d32f2f">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap-dark.min.css" rel="stylesheet" crossorigin="anonymous">
<link rel="stylesheet" href="https://www.myinstants.com/media/css/A.external.css.pagespeed.cf.uxZkR9uc19.css" />
<script async src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
</head>
<body>
<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-bar"  style="background-color: rgb(50, 81, 149);">
<div class="container-fluid justify-content-between flex-row">
  <div class="my-1">
    <a id="brand" class="navbar-brand ms-3">ㄅ主播生日(試做中)</a>
  </div>
</div>
</nav>
 <div>
  
<div id="sticky-left" class="skyscraper-large-ad">
<div id="bsa-zone_1623877957242-0_123456"></div>
</div>
<div id="sticky-right" class="skyscraper-large-ad text-right">
<div id="bsa-zone_1623877993970-7_123456"></div>
</div>
<div id="content">
<div id="top-ad">
<div class="multiaspect-large-banner-ad">

<div id="bsa-zone_1623877594889-6_123456"></div>
</div>
</div>

<!-- 中間按鈕區塊 -->
<div id="instants_container">

 <!-- 迴圈 v-for -->
  <div class="instant" v-for="file in soundList">
    <div class="circle small-button-background" style="background-color:#1582f0;"></div>
    <button class="small-button" v-on:click="play(file.name)" type="button"></button>
    <div class="small-button-shadow"></div>
    <a class="instant-link link-secondary">{{file.name}}</a>
  </div>




</div>
<div id="loading"></div>

</div>
</div>

<script>
  var fileDomain = "./media/"//"https://github.com/gordon104532/button_with_sound/raw/main/media/" 
    function infiniteScroll() {
      let responseBuffer = [];
      let requestPending = false;
      let currentPage = 1;
      const loadingEl = document.querySelector('#loading');
      const containerEl = document.querySelector('#instants_container');

      const emptyBuffer = () => {
        if (responseBuffer.length == 0) return;
        
        while (responseBuffer.length > 0) {
            const item = responseBuffer.shift();
            containerEl.appendChild(item);
        }
      
        try {
          window.optimize = window.optimize || { queue: [] };
          if (currentPage % 2 == 0) {
            window.optimize.queue.push(() => {
              window.optimize.push(`bsa-zone_1643037277384-0_123456_${ currentPage }`);
            });
          } else {
            window.optimize.queue.push(() => {
              window.optimize.push(`bsa-zone_1657119475700-3_123456_${ currentPage }`);
            });
          }
          
        } catch (error) {
          console.log(error);
        }
        
        let params = (new URL(document.location)).searchParams;
        params.set('page', currentPage);
        let pageLocation = window.location.href.split('?')[0] + '?' + params;
        gtag('event', 'page_view', {
          page_location: pageLocation,
        });
      };

      const requestHandler = () => {
          if (requestPending) return;
          currentPage = currentPage + 1;
          requestPending = true;
          let params = (new URL(document.location)).searchParams;
          params.set('page', currentPage);
          fetch(`?${params}`)
            .then(response => {
                if (response.ok) {
                    return response.text();
                } else {
                    throw new Error("Not 2xx response", {cause: response});
                }
            })
            .then(html => {
                var parser = new DOMParser();
                var doc = parser.parseFromString(html, 'text/html');
                hideWebShareIfNotSupported(doc);
                setTooltips(doc);
                responseBuffer = responseBuffer.concat(Array.from(doc.querySelector("#instants_container").children));
                requestPending = false;
                listObserver.observe(loadingEl);
            })
            .catch(error => {
                loadingEl.style = "display: none";
                listObserver.unobserve(loadingEl);
            });
      }

      const listObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
              if (entry.intersectionRatio > 0) {
                  listObserver.unobserve(loadingEl);
                  emptyBuffer();
                  requestHandler();
              }
          });
      }, {
          rootMargin: "0px 0px 200px 0px"
      });
      
      listObserver.observe(loadingEl);
      requestHandler();

    }
    infiniteScroll();
  </script>

<script>
  var app4 = new Vue({
    el: '#instants_container',
    data:{
      soundList:[
        {name:'ㄅㄆㄇ安安'},
        {name:'哈囉'},
        {name:'生日快熱'},
        {name:'哇賽'},
        {name:'哇賽2'},
        {name:'ㄅㄅㄇ'},
        {name:'天使般的嗓音'},
        {name:'歐買尬'},
        {name:'真的很可愛'},
        {name:'暈爛了'},
        {name:'阿巴阿巴'},
        {name:'啵啵啵'},
        {name:'有人在搞我的表單'},
        {name:'就你在搞耶'},
        {name:'就你在搞'},
        {name:'真的抱歉'},
        {name:'怎麼還有十分鐘'},
        {name:'駿我大哥'},
      ]
    },
    methods: {
    play: function (file) {
      playAudio(fileDomain + file + '.mp3')
    }
  }
  });

  var audio = new Audio();
  audio.preload = 'none';
  var hasErrors;
  var lastUrl;
  var canPause;
  function playAudio(url) {
    if (canPause) {
        audio.pause();
        audio.currentTime = 0;
    }
    if (lastUrl != url || hasErrors) {
        audio.src = url;
        lastUrl = url;
        hasErrors = false;
        canPause = false;
        audio.onerror = function() {
            hasErrors = true
        }
        ;
    }
    var playPromise = audio.play();
    if (playPromise !== undefined) {
        playPromise.then(_=>{
            canPause = true;
        }
        ).catch(error=>{
            hasErrors = true;
        }
        );
    }
}
  </script>
</body>
</html>